import { SignerWithAddress } from '@nomiclabs/hardhat-ethers/signers';
import {
  KeyedPlonkVerifier,
} from '../typechain-types';
import { ethers} from 'hardhat';
import { BigNumber } from 'ethers';

const log = console.log;

describe('PlonkVerifier', () => {
    const unit = ethers.constants.WeiPerEther;
    let operator: SignerWithAddress;
    let signers: SignerWithAddress[];

    let plonkVerifier: KeyedPlonkVerifier;

    before('before', async () => {
        signers = await ethers.getSigners();
        [operator] = signers;

        const plonkVerifierFactory = await ethers.getContractFactory("KeyedPlonkVerifier");
        // plonkVerifier = await plonkVerifierFactory.deploy();
        plonkVerifier =  plonkVerifierFactory.attach("0xf9ed790908358d8c60527fce4ec6a326626be7b3");
    });

    it('verify_serialized_proof', async () => {
        //console.log("verify proof successfully? ", await plonkVerifier.batch_verify_serialized_proof([121, 144], [BigNumber.from("4653044465905119189395959166004651254256445026934916019197440205450493830241"), BigNumber.from("5967234169035841086599820584517711433554689620441808076517820357788979968879"), BigNumber.from("5067849744806333288991791205490100727194196134967042105360017914160239513211"), BigNumber.from("7258915823957147207697115901710059303028772606528190261489301505804514327055"), BigNumber.from("21874983410956602492016537574019517636511869915001852543748009157896054139728"), BigNumber.from("1829216385874861398884253739325731210566255688889242670670183297273031409005"), BigNumber.from("17999242768078241032131767121274566774373948973468837173692680406277129048020"), BigNumber.from("17721360664059270252757824426010638117950452950562200682308994949419585279521"), BigNumber.from("13634153033376968961893228993243342375542583560420285178965600752187736892743"), BigNumber.from("1107000044053454163472107307240867108090363785205674193139396309674878938043"), BigNumber.from("7465539053099139914698061973166809314054703113774356702366832139888842022187"), BigNumber.from("16526216441592492959891997878959287099955670920929483784923214051967846485992"), BigNumber.from("7170039938264698314020000236251817501816787809686952238572902613102110157769"), BigNumber.from("18945161294902636367773484846046528247716694528104074238493226282580105398121"), BigNumber.from("2893245240345518145067945900944032826195318843311496491696791496975935084572"), BigNumber.from("21388632633908720862614642123186085147944656028554296545204858458873673092557"), BigNumber.from("2164398141621000169785509179724128898436325190804311074276374412442588566207"), BigNumber.from("14116474854705633701507147587129301606797569886375298705299745997602030531564"), BigNumber.from("21251794751230364441364828949748732419251660737677668362502259511116159787974"), BigNumber.from("16166983501031288289598043033560354722204691143880130757725989537455087770394"), BigNumber.from("4899344643677120374556023646405056957869696064979382946184874918483342236456"), BigNumber.from("13108447229416374621800232869924024612251903042992582511276925997673641998958"), BigNumber.from("20186408933642977047052147770835711090991697716010592580555817032605136312377"), BigNumber.from("21730544004007089453109491129118356133575753374825153498811046145065837982796"), BigNumber.from("17662181538092694542089763667064715950393010565926167630325671266759421359978"), BigNumber.from("5076684929905891954903380159120445655584672936093688759882149306165470157696"),BigNumber.from("16366400690798769522511816587472385740401236238243965672184828110225647255105"), BigNumber.from("11390807543101057537101876814523436797031173797044051822151479206457626769897"), BigNumber.from("16295259799051209950313420545339535234203089425291556580449856993226506888935"), BigNumber.from("18190615799611535868928169719046385863669351414709158993183512446091173693660"), BigNumber.from("8858214669862097885080078677157952836935104047597315687137052989532290734568"), BigNumber.from("714772128278809074803307579130593375146554935924514294613952015030458030477"), BigNumber.from("5136676825228428372297794576353683265756169704563423881843454040553237282592"), BigNumber.from("15313734626910716151475248544532748890764989214649827153149262962108557513845"), BigNumber.from("14340391770144384154653092056204143575419597754312946981101469077781533272803"), BigNumber.from("9671331530807644515708797116967201861692495609328366723511171731336541758424"), BigNumber.from("971737147979482260532280667378087496537870761515907920798036531984913916437"), BigNumber.from("10007209807546742642971772556292346010226172627825801342883919641195356205740"), BigNumber.from("20872617752045865538288812846906109091179657665568327401547040819280446569259"), BigNumber.from("11414507789718015260602523425689795133572257596657371225385661886766302075817"), BigNumber.from("18380877447965413660076523255854253998812068177305420956498385820898117433330"), BigNumber.from("18369012695296805247851681604013191224935921693675258703174598960806123076191"), BigNumber.from("13197762907695366434607203550062205353441974651913273598555072467207268490003"), BigNumber.from("13214445169230188120719648709096348727342564924584784056115090739324285361077"), BigNumber.from("5851785990991654752118774939883477178143857078533925134691413310248807236192"), BigNumber.from("10700243594587545440421483020749759335516557589144910798048591366137093471556"), BigNumber.from("19690724640335586532078736274421701593494260095429903548722001868693721257695"), BigNumber.from("16336898011789391248844177280434607378305342176071533298485453157198257973698"), BigNumber.from("11998284760077586750244996415635274126280201386866984756249672271122151894328"), BigNumber.from("19146365884835918246827973043720407901522806601703884459796282144057815954329"), BigNumber.from("10873999169462003230141787067028681491921051362606287483874138936589156589382"), BigNumber.from("20513735169229085344941474110388972506089101190077570498423631169835327761906")], 2));
        /*
        const txResponse = await plonkVerifier.batch_verify_serialized_proof([121, 144, 169], [BigNumber.from("3485243402538384596309088210839738190688937448781297533633389748264405215791"), BigNumber.from("18002630228427052411111385138832644593659717721069267435528354634553436375552"), BigNumber.from("17252565399628864811657147121851271057467475529913792301371435631316411545158"), BigNumber.from("7389542032068471871934243650151605359803571131639669372887020796830872475131"), BigNumber.from("4671730527847735990033724136166496439228865809238923360333577225314685856052"), BigNumber.from("12121114070229891115840049478761271744657690155910732076157724598919511986693"), BigNumber.from("13081456543716741984543256518034752173181883356512502155695575461201721352178"), BigNumber.from("9418114837074122136899374345060865123333372745578284918329684428459085417014"), BigNumber.from("13448347758110608490228436822668078292183049328125133878063394792045363823009"), BigNumber.from("128719574245493223158032364848216289706502906241352711740529236121492908336"), BigNumber.from("15680737678023928628817472053483151000616800461339045662529595788877813064451"), BigNumber.from("11698675900386144278952017797901789349845306296094677423473404155087899595604"), BigNumber.from("3067022617619530109260381649926977304979039273548202623943258011887745247069"), BigNumber.from("2805945073828770271003982423112471184364784048356289032156822862401063044676"), BigNumber.from("9507663946059011392365820996729276385300831873492575236259301315006551131567"), BigNumber.from("12994816111958320076842558296829329324453875286028385428867131267406081040221"), BigNumber.from("11694570381397354035918895230864574468142933833602244753299422435435579460227"), BigNumber.from("8105686245673512831445284964235062034002128349571508215327297919263819370706"), BigNumber.from("18422735253806836332427719614139275808580107727180704472599786216976639811014"), BigNumber.from("4900014333683419213456963689176062065950756538251892713419352183823146519831"), BigNumber.from("6270775482811327559382609142019110407385260076556757085976947623674698850700"), BigNumber.from("9523864526576145177704838635245219521717797868513248180486184553422180680169"), BigNumber.from("17964526699702973346023192736365171839798023263412076630845546013503253828354"), BigNumber.from("3100136695113537527287276687869642490664279483404145031028667645077804932812"), BigNumber.from("5766561071140871523543570067131788960068603540560756306403546523784284159899"), BigNumber.from("8389423942697644155039656763811366797209769248279643630815539614877824198059"),BigNumber.from("19748863526834773199698768189760221549151486049645106326536865820189670923637"), BigNumber.from("14880361908025601370787886431696216143666907562358521164814014305407078036088"), BigNumber.from("19793152207532428037960467191484539511278621593367428134934670596609602588859"), BigNumber.from("3893511582689326724355705319074086639104603865260428972043766599933004221466"), BigNumber.from("832008115462083179268162615773197916066179971162814862696434998210214315414"), BigNumber.from("471478730539085977653522618244980000887988516052471868847398078407677453714"), BigNumber.from("21512986389858205215689342079128944715421794200469607705506415124867302747879"), BigNumber.from("15637203681007274167256419871893547891520742375152927620228867975911205031066"), BigNumber.from("4163364234753032654790071427626351658244636072428676283082611434192887781518"), BigNumber.from("17798141754489445877522980721223015150483526157805487002688339456112652198118"), BigNumber.from("20823260035021813506967463874534128549260074239415272458340194165692786981743"), BigNumber.from("674852206858602367507902778683075784518888893267137070321283250090484775681"), BigNumber.from("12351504828224177668176448304756821847712393348308512797633892666049356220468"), BigNumber.from("9487520540028372817120342778357529180808145890511474890570486989345590335735"), BigNumber.from("10499497962322716029089375939557983850356015654085835142738040861539266207324"), BigNumber.from("396050144071819350556545411570212763952322087201036156873967765807651794208"), BigNumber.from("7300441187563764035047508725848957132333684483738972642198250780970093540444"), BigNumber.from("19976484389008345607207278145063493550783787140118224399077411507497697787968"), BigNumber.from("11835095100153151504961509322957150962912062266678188817221441501838392545397"), BigNumber.from("18901183806518772831700953998980200757769148979775007448801860662418500504891"), BigNumber.from("21191617579306814977143129770462705964005435666959780236703321514150150089245"), BigNumber.from("13303244722880217705538116526957680326425636261077616392043111126424967431299"), BigNumber.from("1307297456454889035944375199696430896278119610186906908075602403440565989066"), BigNumber.from("17972640157453741520399851262175076648704146911138824825324897791724567003752"), BigNumber.from("456315638774565519716958200770997162848653833250028572747267479938570252048"), BigNumber.from("16595154213075086496616256033032982387407343531409207965063100235021858164205"),BigNumber.from("12154331043196065898566349878475051022009469844311753396721641571279234078714"), BigNumber.from("13661907324078607857238122459391879966564804876019081697739779356078513216595"), BigNumber.from("21219069937272328293195623616599819447019704621465683346425654183518052689903"), BigNumber.from("3314476705686800505231429440825381273231119418882420986056158895604983384847"), BigNumber.from("18803127317349780869359134004726332937290918980645811829689001085638539074496"), BigNumber.from("9544869383056019525455358920550879767419943485129327594849640587511911879216"), BigNumber.from("7012776740419069010202859064959307780401225203414439965917147098602599475108"), BigNumber.from("7864388318501063842476611730697445066394363228374510203814237869405691832172"), BigNumber.from("17801657181138534505019583489704704407243646221819921591314398839627112140572"), BigNumber.from("5221193476892464503018302517803419084464815571546894314304417149140545141925"), BigNumber.from("14561301860665820920013389510106610342037170055700517408023651047197984934375"), BigNumber.from("8097330815157832828803754802049228001074827624534797124469175502202303757075"), BigNumber.from("20374846147552794981174416474507470149392492541548308199818836387018725213743"), BigNumber.from("21852494700491398047860662132893794383704104145776734164169030080641012938395"), BigNumber.from("1733270524461514711756087082897263239705099664308244211421275864814020440705"), BigNumber.from("12934066697113646772597861349297316144003523243405524896329486373167130912695"), BigNumber.from("9738602950158244730629183607328521437518306331440010822093452366405090529886"), BigNumber.from("18626187407346533055904231472502640537727559182099077207861511731090811517408"), BigNumber.from("1613757561297363713296749967917676585174978056146846220945229473283150634460"), BigNumber.from("5158706130517563561356208423583441205125543676518363672507357302813442736682"), BigNumber.from("16728066161834603013253236514649173112387683670390873334275760688020519671794"), BigNumber.from("4153578887167813897127833712108418358964066940377136344636803425711258119203"), BigNumber.from("16378440513622206023734719916003489985908455965361991730830328156159276006061"), BigNumber.from("2216331921333022514201610078606023708676738564937306534485938179710740107418"), BigNumber.from("7972349049324250430400279850147990512761394651806884102835611772841325922510"), BigNumber.from("18433977029269263882586837065743977307327961575890303081609985063884985674558")], 3);
        console.log(await txResponse.wait());

        const txResponse2 = await plonkVerifier.batch_verify_serialized_proof2([121, 144, 169], [BigNumber.from("3485243402538384596309088210839738190688937448781297533633389748264405215791"), BigNumber.from("18002630228427052411111385138832644593659717721069267435528354634553436375552"), BigNumber.from("17252565399628864811657147121851271057467475529913792301371435631316411545158"), BigNumber.from("7389542032068471871934243650151605359803571131639669372887020796830872475131"), BigNumber.from("4671730527847735990033724136166496439228865809238923360333577225314685856052"), BigNumber.from("12121114070229891115840049478761271744657690155910732076157724598919511986693"), BigNumber.from("13081456543716741984543256518034752173181883356512502155695575461201721352178"), BigNumber.from("9418114837074122136899374345060865123333372745578284918329684428459085417014"), BigNumber.from("13448347758110608490228436822668078292183049328125133878063394792045363823009"), BigNumber.from("128719574245493223158032364848216289706502906241352711740529236121492908336"), BigNumber.from("15680737678023928628817472053483151000616800461339045662529595788877813064451"), BigNumber.from("11698675900386144278952017797901789349845306296094677423473404155087899595604"), BigNumber.from("3067022617619530109260381649926977304979039273548202623943258011887745247069"), BigNumber.from("2805945073828770271003982423112471184364784048356289032156822862401063044676"), BigNumber.from("9507663946059011392365820996729276385300831873492575236259301315006551131567"), BigNumber.from("12994816111958320076842558296829329324453875286028385428867131267406081040221"), BigNumber.from("11694570381397354035918895230864574468142933833602244753299422435435579460227"), BigNumber.from("8105686245673512831445284964235062034002128349571508215327297919263819370706"), BigNumber.from("18422735253806836332427719614139275808580107727180704472599786216976639811014"), BigNumber.from("4900014333683419213456963689176062065950756538251892713419352183823146519831"), BigNumber.from("6270775482811327559382609142019110407385260076556757085976947623674698850700"), BigNumber.from("9523864526576145177704838635245219521717797868513248180486184553422180680169"), BigNumber.from("17964526699702973346023192736365171839798023263412076630845546013503253828354"), BigNumber.from("3100136695113537527287276687869642490664279483404145031028667645077804932812"), BigNumber.from("5766561071140871523543570067131788960068603540560756306403546523784284159899"), BigNumber.from("8389423942697644155039656763811366797209769248279643630815539614877824198059"),BigNumber.from("19748863526834773199698768189760221549151486049645106326536865820189670923637"), BigNumber.from("14880361908025601370787886431696216143666907562358521164814014305407078036088"), BigNumber.from("19793152207532428037960467191484539511278621593367428134934670596609602588859"), BigNumber.from("3893511582689326724355705319074086639104603865260428972043766599933004221466"), BigNumber.from("832008115462083179268162615773197916066179971162814862696434998210214315414"), BigNumber.from("471478730539085977653522618244980000887988516052471868847398078407677453714"), BigNumber.from("21512986389858205215689342079128944715421794200469607705506415124867302747879"), BigNumber.from("15637203681007274167256419871893547891520742375152927620228867975911205031066"), BigNumber.from("4163364234753032654790071427626351658244636072428676283082611434192887781518"), BigNumber.from("17798141754489445877522980721223015150483526157805487002688339456112652198118"), BigNumber.from("20823260035021813506967463874534128549260074239415272458340194165692786981743"), BigNumber.from("674852206858602367507902778683075784518888893267137070321283250090484775681"), BigNumber.from("12351504828224177668176448304756821847712393348308512797633892666049356220468"), BigNumber.from("9487520540028372817120342778357529180808145890511474890570486989345590335735"), BigNumber.from("10499497962322716029089375939557983850356015654085835142738040861539266207324"), BigNumber.from("396050144071819350556545411570212763952322087201036156873967765807651794208"), BigNumber.from("7300441187563764035047508725848957132333684483738972642198250780970093540444"), BigNumber.from("19976484389008345607207278145063493550783787140118224399077411507497697787968"), BigNumber.from("11835095100153151504961509322957150962912062266678188817221441501838392545397"), BigNumber.from("18901183806518772831700953998980200757769148979775007448801860662418500504891"), BigNumber.from("21191617579306814977143129770462705964005435666959780236703321514150150089245"), BigNumber.from("13303244722880217705538116526957680326425636261077616392043111126424967431299"), BigNumber.from("1307297456454889035944375199696430896278119610186906908075602403440565989066"), BigNumber.from("17972640157453741520399851262175076648704146911138824825324897791724567003752"), BigNumber.from("456315638774565519716958200770997162848653833250028572747267479938570252048"), BigNumber.from("16595154213075086496616256033032982387407343531409207965063100235021858164205"),BigNumber.from("12154331043196065898566349878475051022009469844311753396721641571279234078714"), BigNumber.from("13661907324078607857238122459391879966564804876019081697739779356078513216595"), BigNumber.from("21219069937272328293195623616599819447019704621465683346425654183518052689903"), BigNumber.from("3314476705686800505231429440825381273231119418882420986056158895604983384847"), BigNumber.from("18803127317349780869359134004726332937290918980645811829689001085638539074496"), BigNumber.from("9544869383056019525455358920550879767419943485129327594849640587511911879216"), BigNumber.from("7012776740419069010202859064959307780401225203414439965917147098602599475108"), BigNumber.from("7864388318501063842476611730697445066394363228374510203814237869405691832172"), BigNumber.from("17801657181138534505019583489704704407243646221819921591314398839627112140572"), BigNumber.from("5221193476892464503018302517803419084464815571546894314304417149140545141925"), BigNumber.from("14561301860665820920013389510106610342037170055700517408023651047197984934375"), BigNumber.from("8097330815157832828803754802049228001074827624534797124469175502202303757075"), BigNumber.from("20374846147552794981174416474507470149392492541548308199818836387018725213743"), BigNumber.from("21852494700491398047860662132893794383704104145776734164169030080641012938395"), BigNumber.from("1733270524461514711756087082897263239705099664308244211421275864814020440705"), BigNumber.from("12934066697113646772597861349297316144003523243405524896329486373167130912695"), BigNumber.from("9738602950158244730629183607328521437518306331440010822093452366405090529886"), BigNumber.from("18626187407346533055904231472502640537727559182099077207861511731090811517408"), BigNumber.from("1613757561297363713296749967917676585174978056146846220945229473283150634460"), BigNumber.from("5158706130517563561356208423583441205125543676518363672507357302813442736682"), BigNumber.from("16728066161834603013253236514649173112387683670390873334275760688020519671794"), BigNumber.from("4153578887167813897127833712108418358964066940377136344636803425711258119203"), BigNumber.from("16378440513622206023734719916003489985908455965361991730830328156159276006061"), BigNumber.from("2216331921333022514201610078606023708676738564937306534485938179710740107418"), BigNumber.from("7972349049324250430400279850147990512761394651806884102835611772841325922510"), BigNumber.from("18433977029269263882586837065743977307327961575890303081609985063884985674558")], 3);
        console.log(await txResponse2.wait());
         */
        const txResponse = await plonkVerifier.batch_verify_serialized_proof([121], [BigNumber.from("3485243402538384596309088210839738190688937448781297533633389748264405215791"), BigNumber.from("18002630228427052411111385138832644593659717721069267435528354634553436375552"), BigNumber.from("17252565399628864811657147121851271057467475529913792301371435631316411545158"), BigNumber.from("7389542032068471871934243650151605359803571131639669372887020796830872475131"), BigNumber.from("4671730527847735990033724136166496439228865809238923360333577225314685856052"), BigNumber.from("12121114070229891115840049478761271744657690155910732076157724598919511986693"), BigNumber.from("13081456543716741984543256518034752173181883356512502155695575461201721352178"), BigNumber.from("9418114837074122136899374345060865123333372745578284918329684428459085417014"), BigNumber.from("13448347758110608490228436822668078292183049328125133878063394792045363823009"), BigNumber.from("128719574245493223158032364848216289706502906241352711740529236121492908336"), BigNumber.from("15680737678023928628817472053483151000616800461339045662529595788877813064451"), BigNumber.from("11698675900386144278952017797901789349845306296094677423473404155087899595604"), BigNumber.from("3067022617619530109260381649926977304979039273548202623943258011887745247069"), BigNumber.from("2805945073828770271003982423112471184364784048356289032156822862401063044676"), BigNumber.from("9507663946059011392365820996729276385300831873492575236259301315006551131567"), BigNumber.from("12994816111958320076842558296829329324453875286028385428867131267406081040221"), BigNumber.from("11694570381397354035918895230864574468142933833602244753299422435435579460227"), BigNumber.from("8105686245673512831445284964235062034002128349571508215327297919263819370706"), BigNumber.from("18422735253806836332427719614139275808580107727180704472599786216976639811014"), BigNumber.from("4900014333683419213456963689176062065950756538251892713419352183823146519831"), BigNumber.from("6270775482811327559382609142019110407385260076556757085976947623674698850700"), BigNumber.from("9523864526576145177704838635245219521717797868513248180486184553422180680169"), BigNumber.from("17964526699702973346023192736365171839798023263412076630845546013503253828354"), BigNumber.from("3100136695113537527287276687869642490664279483404145031028667645077804932812"), BigNumber.from("5766561071140871523543570067131788960068603540560756306403546523784284159899"), BigNumber.from("8389423942697644155039656763811366797209769248279643630815539614877824198059")], 1);
        console.log(await txResponse.wait());
    });

});
